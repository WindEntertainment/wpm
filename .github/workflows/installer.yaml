name: Installer

on:
  push:
    branches:
      - '*'

jobs:
  run-command:
    runs-on: ${{ matrix.os }}
    strategy:
      matrix:
        os: [ubuntu-latest, macos-latest, windows-latest]

    steps:
      - name: Checkout repository
        uses: actions/checkout@v3

      - name: Run install on ${{ runner.os }}
        run: |
          if [ "${{ runner.os }}" == "Windows" ]; then
            powershell -Command "iex (New-Object System.Net.WebClient).DownloadString('https://raw.githubusercontent.com/WindEntertainment/wpm/master/install.ps1')"
          elif [ "${{ runner.os }}" == "macOS" ] || [ "${{ runner.os }}" == "Linux" ]; then
            bash <(curl -s https://raw.githubusercontent.com/WindEntertainment/wpm/master/install.bash)
          else
            echo "Unsupported OS: ${{ runner.os }}"
            exit 1
          fi
